---
  - name: install spurtcommerce
    hosts: all
    become: yes
    tasks:
      - name: craeting nodejs shell file
        file:
          path: nodejs.sh
          state: touch
          mode: 1777
      - name: setup nodesource 
        get_url:
          url: https://deb.nodesource.com/setup_14.x
          dest: nodejs.sh
      - name: run nodejs shell
        command:
          cmd: sh nodejs.sh
      - name: Update cache
        apt:
          update_cache: yes      
      - name: install nodejs
        apt:
          name: nodejs
          state: present
      - name: install npm
        apt:
          name: npm
          state: present
      - name: Install depencies
        community.general.npm:
          name: forever
          state: present
          global: yes
      - name: Install depencies
        community.general.npm:
          name: apidoc
          state: present
          global: yes
      - name: update cache and repo
        apt:
          update_cache: yes
      - name: install apache2
        apt:
          name: apache2
          state: latest
      - name: Enable a2enmode proxy
        community.general.apache2_module:
          state: present
          name: 
            - proxy
            - proxy_http
            - headers
      